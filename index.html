<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recast Pricing Calculator</title>
  <meta name="description" content="Instantly estimate customer and partner pricing with an accessible, brand-aware calculator.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="min-h-screen bg-gray-50 font-['Inter',sans-serif] text-gray-900 antialiased">
  <header class="max-w-6xl mx-auto px-6 lg:px-12 pt-8 pb-4">
    <div class="flex items-center justify-between gap-4">
      <div class="flex items-center gap-3">
        <h1 class="text-3xl font-semibold leading-tight">Recast Pricing Calculator</h1>
      </div>
      <button id="copy-email" class="inline-flex items-center gap-2 rounded-full bg-blue-600 px-6 py-2 text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 transition text-base font-medium">
        <i data-lucide="mail" class="size-4"></i>
        <span>Copy Summary</span>
      </button>
    </div>
    <p class="mt-2 text-base text-gray-700 leading-relaxed">1-Year Term Contract | Discounts increase with higher MAU tiers.</p>
  </header>
  <nav class="max-w-6xl mx-auto px-6 lg:px-12 mt-4" role="tablist" aria-label="Pricing sections">
    <div class="inline-flex w-full sm:w-auto rounded-full bg-gray-100 p-1 shadow-sm divide-x divide-gray-200 sm:divide-x-0">
      <button class="tab-btn flex-1 sm:flex-none inline-flex justify-center items-center gap-2 rounded-full px-6 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 data-[active=true]:bg-blue-600 data-[active=true]:text-white text-gray-700 hover:bg-gray-200 transition"
              role="tab" aria-selected="true" aria-controls="tab-customer" id="tab-customer-btn" data-tab="customer" data-active="true">
        <i data-lucide="user" class="size-4"></i><span>Pricing</span>
      </button>
      <button class="tab-btn flex-1 sm:flex-none inline-flex justify-center items-center gap-2 rounded-full px-6 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 data-[active=true]:bg-blue-600 data-[active=true]:text-white text-gray-700 hover:bg-gray-200 transition"
              role="tab" aria-selected="false" aria-controls="tab-onboarding" id="tab-onboarding-btn" data-tab="onboarding" data-active="false">
        <i data-lucide="rocket" class="size-4"></i><span>Onboarding</span>
      </button>
      <button class="tab-btn flex-1 sm:flex-none inline-flex justify-center items-center gap-2 rounded-full px-6 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 data-[active=true]:bg-blue-600 data-[active=true]:text-white text-gray-700 hover:bg-gray-200 transition"
              role="tab" aria-selected="false" aria-controls="tab-sla" id="tab-sla-btn" data-tab="sla" data-active="false">
        <i data-lucide="life-buoy" class="size-4"></i><span>Support</span>
      </button>
    </div>
  </nav>
  <main id="main" tabindex="-1" class="max-w-6xl mx-auto px-6 lg:px-12 py-6 space-y-6">
    <section id="tab-customer" role="tabpanel" aria-labelledby="tab-customer-btn" class="tab-content">
      <div class="rounded-2xl bg-white p-6 shadow-md hover:shadow-lg transition-shadow duration-300">
        <form id="customer-form" class="grid md:grid-cols-2 gap-6 mb-6" novalidate>
          <div class="space-y-4">
            <div>
              <label for="currency" class="block text-base font-medium text-gray-900 mb-2">Currency</label>
              <select id="currency" name="currency" class="w-full sm:w-40 rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:outline-none bg-white text-gray-900">
                <option value="USD" selected>USD</option>
                <option value="GBP">GBP (Pound)</option>
                <option value="EUR">EUR (Euro)</option>
              </select>
            </div>
            <div>
              <label for="users" class="block text-base font-medium text-gray-900 mb-2">User count</label>
              <input id="users" name="users" type="number" inputmode="numeric" min="250" value="500"
                class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:outline-none bg-white text-gray-900"
                aria-describedby="users-help users-error" />
              <p id="users-help" class="text-sm text-gray-500 mt-1">Enter number of licensed users (minimum 250).</p>
              <p id="users-error" class="hidden mt-1 text-sm text-red-600" role="alert">Please enter a valid user count (minimum 250).</p>
            </div>
          </div>
          <div class="space-y-4">
            <div>
              <label class="block text-base font-medium text-gray-900 mb-2">Sales Rep Commission (ARR)</label>
              <p id="salesCommission" class="text-3xl font-semibold leading-tight text-blue-600">$0.00</p>
            </div>
          </div>
        </form>
        <h2 class="text-xl font-medium mb-4">Customer Quote</h2>
        <div class="overflow-x-auto">
          <table class="w-full text-left border-collapse text-base text-gray-700">
            <thead>
              <tr class="border-b border-gray-200">
                <th class="pb-3 font-medium">Product</th>
                <th class="pb-3 font-medium">Users</th>
                <th id="custPerUserHeader" class="pb-3 font-medium">Per User / month</th>
                <th id="thBaseCust" class="pb-3 font-medium">Base MRR</th>
                <th id="thTotalCust" class="pb-3 font-medium">Total ARR</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b border-gray-200 last:border-0">
                <td class="py-3">Application Workspace</td>
                <td id="custUsers">0</td>
                <td id="custPerUser">$0.00</td>
                <td id="custBase">$0.00</td>
                <td id="custTotal">$0.00</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
    <section id="tab-onboarding" role="tabpanel" aria-labelledby="tab-onboarding-btn" class="tab-content hidden">
      <div class="rounded-2xl bg-white p-6 shadow-md hover:shadow-lg transition-shadow duration-300">
        <h2 class="text-xl font-medium mb-2">Recast Onboarding Overview</h2>
        <p class="text-base text-gray-700 leading-relaxed mb-2">Moving from Citrix to Azure Virtual Desktop (AVD) has never been easier.</p>
        <p class="text-base text-gray-700 leading-relaxed mb-4">Our onboarding is built to make your transition fast, predictable, and low-stress. You’ll work directly with Recast experts who guide your IT team step-by-step — from environment preparation to AVD configuration and go-live support. Within a few weeks, your environment will be fully optimized for AVD and ready for production use.</p>
        <h3 class="text-base font-medium mb-3">Onboarding Services Comparison</h3>
        <div class="overflow-x-auto">
          <table class="w-full text-left border-collapse text-base text-gray-700">
            <thead>
              <tr class="border-b border-gray-200">
                <th class="pb-3 font-medium">Onboarding Stage</th>
                <th class="pb-3 font-medium">Citrix to AVD Transition Onboarding</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b border-gray-200"><td class="py-3">Project Duration</td><td class="py-3">6–8 Weeks (max 40 consulting hours)</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Go-Live Support Period</td><td class="py-3">6 Weeks post-configuration (2 hrs/week of SME access)</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Engagement Type</td><td class="py-3">Advisory-led (Customer executes configurations under Recast guidance)</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Scope of Support</td><td class="py-3">Migration planning, AVD setup, and operational transition from Citrix</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Availability</td><td class="py-3">Standard Business Hours (8am–5pm CT/CET)</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Delivery Format</td><td class="py-3">Remote consultation and documentation support</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Environment Preparation</td><td class="py-3">Guidance for preparing infrastructure and identity access for AVD</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">AVD Configuration Assistance</td><td class="py-3">Step-by-step guidance on configuring host pools, session management, and user access</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Policy &amp; Access Advisory</td><td class="py-3">Consultation on conditional access, identity mapping, and application policies</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Modern Workplace Alignment</td><td class="py-3">Optimization of AVD deployment for Windows endpoint environments</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Custom Branding (Optional)</td><td class="py-3">Consultation on workspace look and feel to match corporate standards</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Consultation Deliverables</td><td class="py-3">Custom configuration guide, training materials, and best-practice documentation</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Acceptance Criteria</td><td class="py-3">Customer validates readiness for production AVD use following guided implementation</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3">Dependencies</td><td class="py-3">Customer provides infrastructure access and participates in scheduled onboarding sessions</td></tr>
              <tr class="border-b border-gray-200 last:border-0"><td class="py-3">Pricing</td><td class="py-3">Included in onboarding engagement (non-standalone service)</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
    <section id="tab-sla" role="tabpanel" aria-labelledby="tab-sla-btn" class="tab-content hidden">
      <div class="rounded-2xl bg-white p-6 shadow-md hover:shadow-lg transition-shadow duration-300">
        <h2 class="text-xl font-medium mb-4">Support Service Levels</h2>
        <div class="overflow-x-auto">
          <table class="w-full text-left border-collapse text-base text-gray-700" aria-label="Support features and response times">
            <thead>
              <tr class="border-b border-gray-200">
                <th scope="col" class="pb-3 font-medium">Feature</th>
                <th scope="col" class="pb-3 font-medium">Support</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Urgent Severity</td><td class="py-3">First response: <strong>1 Business Day</strong></td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Normal Severity</td><td class="py-3">First response: <strong>2 Business Days</strong></td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Low Severity</td><td class="py-3">First response: <strong>3 Business Days</strong></td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Availability</td><td class="py-3">8am – 5pm CT/CET</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Support Hours</td><td class="py-3">Unlimited</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Dedicated CSM</td><td class="py-3">✔</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Support Call Scheduling</td><td class="py-3">Based on availability</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Environment Audit</td><td class="py-3">—</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Configuration Audit</td><td class="py-3">—</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">Upgrade Assistance</td><td class="py-3">—</td></tr>
              <tr class="border-b border-gray-200"><td class="py-3 font-medium">User Group Membership</td><td class="py-3">Based on availability</td></tr>
              <tr class="border-b border-gray-200 last:border-0"><td class="py-3 font-medium">Pricing</td><td class="py-3">Included with Recast Licensing</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </main>
  <div id="toast" role="status" aria-live="polite" class="pointer-events-none fixed bottom-4 right-4 z-50 hidden">
    <div class="rounded-xl bg-white px-4 py-3 shadow-lg text-base flex items-center gap-2 border border-gray-200">
      <i data-lucide="check" class="size-4 text-green-600"></i>
      <span id="toast-msg">Copied to clipboard</span>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
      initApp();
    });

    const CURRENCIES = {
      USD: { code: 'USD', label: 'USD', locale: 'en-US', rateFromUSD: 1.00 },
      EUR: { code: 'EUR', label: 'EUR', locale: 'de-DE', rateFromUSD: 0.85 },
      GBP: { code: 'GBP', label: 'GBP', locale: 'en-GB', rateFromUSD: 0.77 }
    };

    const STATE = {
      currency: 'USD',
      users: 500,
      totals: {
        baseMonthly: 0,
        baseAnnual: 0,
        totalMonthly: 0,
        totalAnnual: 0,
        partnerPrice: 0,
        salesCommission: 0
      }
    };

    function calculateMonthlyCost(users) {
      if (!Number.isFinite(users) || users < 1) return 0;
      let total = 0;
      let remaining = users;
      let tier1 = Math.min(remaining, 999);
      total += tier1 * 4.00;
      remaining -= tier1;
      if (remaining <= 0) return total;
      let tier2 = Math.min(remaining, 4000);
      total += tier2 * 3.50;
      remaining -= tier2;
      if (remaining <= 0) return total;
      let tier3 = Math.min(remaining, 5000);
      total += tier3 * 3.00;
      remaining -= tier3;
      if (remaining <= 0) return total;
      let tier4 = Math.min(remaining, 15000);
      total += tier4 * 2.50;
      remaining -= tier4;
      if (remaining <= 0) return total;
      let tier5 = Math.min(remaining, 25000);
      total += tier5 * 2.00;
      remaining -= tier5;
      if (remaining <= 0) return total;
      total += remaining * 1.50;
      return total;
    }

    function getCurrencyMeta() {
      return CURRENCIES[STATE.currency] || CURRENCIES.USD;
    }

    function toSelectedCurrency(amountUSD) {
      const { rateFromUSD } = getCurrencyMeta();
      return amountUSD * rateFromUSD;
    }

    function formatCurrencyFromUSD(amountUSD) {
      const { code, locale } = getCurrencyMeta();
      const v = toSelectedCurrency(amountUSD) || 0;
      return new Intl.NumberFormat(locale, { style: 'currency', currency: code, maximumFractionDigits: 2 }).format(v);
    }

    function validateUsers(n) {
      const valid = Number.isFinite(n) && n >= 250 && n <= 1000000;
      return { valid, message: valid ? '' : 'Please enter a valid user count (minimum 250).' };
    }

    function computeTotals() {
      const monthlyCostUSD = calculateMonthlyCost(STATE.users);
      const annualCostUSD = monthlyCostUSD * 12;
      const baseMonthlyUSD = monthlyCostUSD;
      const baseAnnualUSD = annualCostUSD;
      const totalMonthlyUSD = baseMonthlyUSD;
      const totalAnnualUSD = baseAnnualUSD;
      const marginUSD = totalAnnualUSD * 0.30;
      const partnerPriceUSD = totalAnnualUSD - marginUSD;
      const salesCommissionUSD = totalAnnualUSD * 0.10;
      STATE.totals = {
        baseMonthly: baseMonthlyUSD,
        baseAnnual: baseAnnualUSD,
        totalMonthly: totalMonthlyUSD,
        totalAnnual: totalAnnualUSD,
        partnerPrice: partnerPriceUSD,
        salesCommission: salesCommissionUSD
      };
    }

    function renderCustomerTable() {
      document.getElementById('custUsers').textContent = STATE.users;
      const monthlyCostUSD = calculateMonthlyCost(STATE.users);
      const avgPerUserMonthly = monthlyCostUSD / STATE.users;
      document.getElementById('custPerUser').textContent = formatCurrencyFromUSD(avgPerUserMonthly);
      document.getElementById('custBase').textContent = formatCurrencyFromUSD(STATE.totals.baseMonthly);
      document.getElementById('custTotal').textContent = formatCurrencyFromUSD(STATE.totals.totalAnnual);
    }

    function renderCommission() {
      document.getElementById('salesCommission').textContent = formatCurrencyFromUSD(STATE.totals.salesCommission);
    }

    function renderForm() {
      const usersInput = document.getElementById('users');
      const currencySelect = document.getElementById('currency');
      if (Number(usersInput.value) !== STATE.users) usersInput.value = STATE.users;
      if (currencySelect.value !== STATE.currency) currencySelect.value = STATE.currency;
    }

    function renderTabs(active) {
      document.querySelectorAll('.tab-btn').forEach(btn => {
        const isActive = btn.dataset.tab === active;
        btn.setAttribute('data-active', isActive);
        btn.setAttribute('aria-selected', isActive);
      });
      document.querySelectorAll('.tab-content').forEach(sec => sec.classList.add('hidden'));
      document.getElementById(`tab-${active}`).classList.remove('hidden');
    }

    function renderAll() {
      computeTotals();
      renderCustomerTable();
      renderCommission();
      renderForm();
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      const msg = document.getElementById('toast-msg');
      if (!toast || !msg) return;
      msg.textContent = message;
      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 1800);
    }

    function copyEmailSummary() {
      const subject = 'Pricing Summary';
      const { code } = getCurrencyMeta();
      const baseLabel = 'Base MRR';
      const totalLabel = 'Total ARR';
      const baseValue = STATE.totals.baseMonthly;
      const totalValue = STATE.totals.totalAnnual;
      const monthlyCostUSD = calculateMonthlyCost(STATE.users);
      const averageMonthlyPerUser = monthlyCostUSD / STATE.users;
      const lines = [
        'Recast Pricing Summary',
        '',
        'Inputs',
        `- Users: ${STATE.users}`,
        `- Currency: ${code}`,
        `- Average MSRP (per-user monthly): ${formatCurrencyFromUSD(averageMonthlyPerUser)}`,
        '',
        'Customer Pricing',
        `- ${baseLabel}: ${formatCurrencyFromUSD(baseValue)}`,
        `- ${totalLabel}: ${formatCurrencyFromUSD(totalValue)}`,
        '',
        'Partner Pricing (ARR)',
        `- Sales Rep Commission (10%): ${formatCurrencyFromUSD(STATE.totals.salesCommission)}`
      ];
      const body = encodeURIComponent(lines.join('\n'));
      const mailto = `mailto:?subject=${encodeURIComponent(subject)}&body=${body}`;
      navigator.clipboard.writeText(lines.join('\n')).then(() => {
        showToast('Summary copied to clipboard');
      }).catch(() => {
        window.location.href = mailto;
      });
    }

    function initEvents() {
      const usersInput = document.getElementById('users');
      const usersError = document.getElementById('users-error');
      const currencySelect = document.getElementById('currency');
      usersInput.addEventListener('input', () => {
        const n = parseInt(usersInput.value, 10);
        const { valid, message } = validateUsers(n);
        usersError.textContent = message;
        usersError.classList.toggle('hidden', valid);
        if (valid) {
          STATE.users = n;
          renderAll();
        }
      });
      currencySelect.addEventListener('change', () => {
        STATE.currency = currencySelect.value;
        renderAll();
      });
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          renderTabs(btn.dataset.tab);
        });
      });
      document.getElementById('copy-email').addEventListener('click', (e) => {
        e.preventDefault();
        copyEmailSummary();
      });
    }

    function initApp() {
      initEvents();
      renderTabs('customer');
      renderAll();
    }
  </script>
</body>
</html>
